{% extends "base.html" %}
{% block includes %}
<script src="{{ url_for('static', path='js/template_scan.js') }}"></script>
{% endblock %}
{% block body %}
{% if template_scan %}
<h1 class="text-center">{{ update_scan_locale }}</h1>
{% else %}
<h1 class="text-center">{{ add_new_scan_locale }}</h1>
{% endif %}

<div><strong>{{ name_locale }}</strong>: {{ template.name }}</div></br>

<div class="container">
  <div class="row mb-8">

    <div class="flex flex-col ... divide-y">
      <div>
        <section><strong>{{ scan_types_locale }}:</strong>
          <select id="scanType" aria-label="{{ scan_types_locale }}">
            {% for scan_type in scan_types %}
            <option id="{{ scan_type.name }}" value="{{ scan_type.id }}" aria-label="{{ scan_type.name }}">{{ scan_type.name }}</option>
            {% endfor %}
          </select>

          <button class="bg-green-500 hover:bg-green-700 text-white font-bold  px-2 rounded" type="button"
            id="addScanButton" class="btn btn-primary" onclick="scanAdd();">&#43;
          </button>
        </section>
      </div>
      <div class="shadow ...">
        {% if template_scan %}
        <form id="templateScan" name="templateScan" action="/scans/template/{{template.id}}/scan/{{template_scan.id}}" method="PUT">
        {% else %}
        <form id="templateScan" name="templateScan" action="/scans/template/{{template.id}}/scan" method="POST">
        {% endif %}
          <div id="container" class="border-double border-4 border-light-blue-500 ...">
            <strong>Selected scan type</strong></br>
            {% if template_scan %}
            <div id='child'>
              <input type="text" id="scanType-{{ template_scan.scan_type.id }}"name="scanType" value="{{ template_scan.scan_type.name }}" readonly class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-purple-500"></input>  
              <button class="bg-red-500 hover:bg-red-700 text-white font-bold  px-2 rounded" type="button" id="addScanButton" class="btn btn-primary" onclick="scanClear();">{{ clear_locale }}</button>
            </div>
            {% endif %}
            
          </div>
          <table id="dataTable" class="table-auto" id="editableTable">
            <thead>
              <tr>
                <th class="px-4 py-2">{{ key_locale }}</th>
                <th class="px-4 py-2">{{ value_locale }}</th>
                <th>
                  <button class="bg-green-500 hover:bg-green-700 text-white font-bold px-2 rounded" type="button"
                    id="addButton" class="btn btn-primary" onclick="dataAdd();">&#43;</button>

                </th>
              </tr>
            </thead>
            <tbody>
              
              {% if template_scan %}
                  {% for data in scan_config %}
                    <tr data-id="{{data.id}}">
                      <td class='border px-4 py-2'>
                        <input type='text' name='key' value="{{data.key}}" aria-label="{{ key_locale }}"/>
                      </td>
                      <td class='border px-4 py-2'>
                        <input type='text' name='value' value="{{data.value}}" aria-label="{{ value_locale }}"/>
                      </td>
                    </tr>
                  {% endfor %}
              {% else %}
                <tr data-id="1">
                  <td class="border px-4 py-2"><input type="text" name="key" value="url" aria-label="{{ key_locale }}"/></td>
                  <td class="border px-4 py-2"><input type="text" name="value" value="https://" aria-label="{{ value_locale }}"/></td>
                </tr>
              {% endif %}
            </tbody>
          </table>
          {% if template_scan %}
          <button id="updateBtn" class="h-12 mt-3 text-white w-full rounded bg-red-800 hover:bg-red-900">{{ update_locale }}</button>
          {% else %}
          <button id="submitBtn" class="h-12 mt-3 text-white w-full rounded bg-red-800 hover:bg-red-900">{{ save_locale }}</button>
          {% endif %}
        </form>
      </div>
    </div>
</div>
{% block footer %}
{{super()}}
{% endblock %}
{% endblock %}